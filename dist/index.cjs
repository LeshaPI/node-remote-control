(()=>{"use strict";const e=require("fs"),n=require("path"),t=require("http").createServer((function(t,o){const i=n.resolve(n.dirname(""))+("/"===t.url?"/front/index.html":"/front"+t.url);e.readFile(i,(function(e,n){if(e)return o.writeHead(404),void o.end(JSON.stringify(e));o.writeHead(200),o.end(n)}))})),o=require("ws"),i=require("@nut-tree/nut-js");var r=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function c(e){try{d(o.next(e))}catch(e){r(e)}}function u(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,u)}d((o=o.apply(e,n||[])).next())}))},c=function(e,n,t,o){return new(t||(t=Promise))((function(i,r){function c(e){try{d(o.next(e))}catch(e){r(e)}}function u(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,u)}d((o=o.apply(e,n||[])).next())}))};console.log("Start static http server on the 8181 port!"),t.listen(8181),new o.WebSocketServer({port:8080},(()=>{console.log("Start WS server on the 8080 port!")})).on("connection",((e,n)=>{return t=void 0,u=void 0,a=function*(){yield(e=>c(void 0,void 0,void 0,(function*(){const n=(0,o.createWebSocketStream)(e,{encoding:"utf8",decodeStrings:!1});n.on("data",(e=>c(void 0,void 0,void 0,(function*(){const[t,...o]=e.split(" ");switch(t){case"mouse_up":yield(([e])=>r(void 0,void 0,void 0,(function*(){yield i.mouse.move((0,i.up)(Number(e)))})))(o),n.write(t);break;case"mouse_down":yield(([e])=>r(void 0,void 0,void 0,(function*(){yield i.mouse.move((0,i.down)(Number(e)))})))(o),n.write(t);break;case"mouse_left":yield(([e])=>r(void 0,void 0,void 0,(function*(){yield i.mouse.move((0,i.left)(Number(e)))})))(o),n.write(t);break;case"mouse_right":yield(([e])=>r(void 0,void 0,void 0,(function*(){yield i.mouse.move((0,i.right)(Number(e)))})))(o),n.write(t);break;case"mouse_position":{const{x:e,y:o}=yield r(void 0,void 0,void 0,(function*(){return yield i.mouse.getPosition()}));n.write(`${t} ${e},${o}`);break}}}))))})))(e)},new((d=void 0)||(d=Promise))((function(e,n){function o(e){try{r(a.next(e))}catch(e){n(e)}}function i(e){try{r(a.throw(e))}catch(e){n(e)}}function r(n){var t;n.done?e(n.value):(t=n.value,t instanceof d?t:new d((function(e){e(t)}))).then(o,i)}r((a=a.apply(t,u||[])).next())}));var t,u,d,a}))})();